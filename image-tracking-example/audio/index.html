<!DOCTYPE html>
<html lang="en">
<head>
   <title>Sample: AR.js with Image Tracking</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>
   <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
   <script>
    window.onload = function() {
        AFRAME.registerComponent('shoundhandler', {
            init: function () {
                var marker = this.el;

                this.sound = document.querySelector("#sound");

                marker.addEventListener('markerFound', function () {
                    this.sound.play();
                }.bind(this));
    
        marker.addEventListener('markerLost', function() {
            this.sound.pause();
            this.sound.currentTime = 0;
        }.bind(this));
            }
        });
    };
</script>
</head>
<body>
   <div class="arjs-loader">
      <p>
         Now Loading...<br>
         Please prepare the marker image :)
      </p>
   </div>

   <a-scene
   vr-mode-ui="enabled: false;"
   renderer="logarithmicDepthBuffer: true;"
   embedded
   arjs="trackingMethod: best; sourceType: webcam;debugUIEnabled: false;"
   >

    <a-assets>
            <a-asset-item src="audio.mp3"
                preload="false" id="sound" response-type="arraybuffer" loop
                crossorigin webkit-playsinline autoplay="false" playsinline>
            </a-asset-item>
        </a-assets>
        
   <a-nft
   type="nft"
   url="https://naomitorres.github.io/cursito_ar/image-tracking-example/collage/collage"
   smooth="true"
   smoothCount="10"
   smoothTolerance=".01"
   smoothThreshold="5"
   >

   <a-sound src="#sound"></a-sound>

</a-nft>
<a-entity camera></a-entity>
</a-scene>
<script>


</script>

<style>
body {
   font-family: helvetica, arial, sans-serif;
   margin: 0;
   overflow: hidden;
}
.arjs-loader {
   height: 100%;
   width: 100%;
   position: absolute;
   top: 0;
   left: 0;
   background-color: rgba(0, 0, 0, 0.8);
   z-index: 9999;
   display: flex;
   justify-content: center;
   align-items: center;
}
.arjs-loader p {
   text-align: center;
   font-size: 1.25em;
   color: white;
}
</style>
</body>
</html>